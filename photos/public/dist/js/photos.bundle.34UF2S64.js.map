{
  "version": 3,
  "sources": ["../../../../../apps/photos/photos/public/js/photos.bundle.js"],
  "sourcesContent": ["// Better approach - don't override, just intercept\n\n\n// frappe.router.on('change', () => {\n//     const route = frappe.get_route_str();\n//     console.log(\"route\",route);\n    \n//     var from_rout = false\n\n//     if (route === \"Workspaces/Document Management\") {\n//         frappe.set_route(\"my-drive-v2\");\n\n//         from_rout = true\n//         console.log(\"route is \",frappe.get_route_str());\n        \n//     }\n\n//     if (route !== \"Workspaces/Document Management\") {\n//         // frappe.set_route(\"my-drive-v2\");\n\n//         if(from_rout){\n\n//             console.log(\"get called\");\n\n//             // frappe.desk.sidebar.make();\n\n//             window.location.reload();\n\n//             from_rout =  false\n            \n\n//         }\n        \n//     }\n\n// });\n\n\n\nfrappe.provide('frappe.router');\n\n// \uD83C\uDFAF Track the previous route\nlet previousRoute = null;\n\nfrappe.router.on('change', () => {\n    const currentRoute = frappe.get_route_str();\n\n    console.log(\"get_route_str\",currentRoute);\n    \n    \n    // Redirect workspace to custom page\n    if (currentRoute === \"Workspaces/Document Management\") {\n        frappe.set_route(\"my-drive-v2\");\n        previousRoute = currentRoute;\n        console.log(\"the route :\",frappe.get_route_str());\n        return;\n\n    }\n\n    if (currentRoute !==\"Workspaces/Document Management\"){\n\n        if (previousRoute ==\"my-drive-v2\"){\n            console.log(\"currentRoute\",currentRoute);\n            window.location.reload();\n            return;\n        \n        }\n    }    \n    \n    // Update previous route\n    previousRoute = currentRoute;\n});\n\n\n\n\n\n// frappe.router.on('change', () => {\n//     const route = frappe.get_route_str();\n\n//     if (route === \"my-drive-v2\") {\n//         enable_my_drive_ui();\n//     } else {\n//         restore_workspace_sidebar();\n//     }\n// });\n\n\n\n// let original_sidebar_html = null;\n\n// frappe.router.on('change', () => {\n//     if (!original_sidebar_html && $('.layout-side-section').length) {\n//         original_sidebar_html = $('.layout-side-section').clone(true, true);\n//     }\n// });\n\n\n// function enable_my_drive_ui() {\n//     $('body').addClass('my-drive-active');\n\n//     // You can hide or reuse sidebar here\n//     $('.layout-side-section').show();\n// }\n\n\n// function enable_my_drive_ui() {\n//     $('.layout-side-section').hide();\n//     $('#my-drive-sidebar').show();\n// }\n\n// function restore_workspace_sidebar() {\n//     if (!original_sidebar_html) return;\n\n//     $('.layout-side-section').replaceWith(\n//         original_sidebar_html.clone(true, true)\n//     );\n\n//     // Rebind Desk sidebar\n//     frappe.desk.sidebar.make();\n// }\n\n\n// function restore_workspace_sidebar() {\n//     console.log(\"Restoring workspace sidebar\");\n\n//     $('body').removeClass('my-drive-active');\n\n//     // 1\uFE0F\u20E3 Remove page-level overrides\n//     $('.layout-side-section')\n//         .removeAttr('style')\n//         .show();\n\n//     $('.list-sidebar')\n//         .removeClass('opened')\n//         .empty(); // VERY IMPORTANT\n\n//     // 2\uFE0F\u20E3 Force Desk to rebuild sidebar\n//     if (frappe.desk && frappe.desk.sidebar) {\n//         frappe.desk.sidebar.make();\n//     }\n\n//     // 3\uFE0F\u20E3 Refresh workspace (ensures links load)\n\n//     // if (frappe.workspace) {\n//     //     var message = __(\"Only Workspace Manager can edit public workspaces\");\n//     //     // frappe.workspace.refresh();\n//     //     frappe.show_message(message);\n//     // }\n// }\n\n\n\n\n\n\n// frappe.provide('frappe.router');\n\n// const original_render = frappe.router.render;\n\n// frappe.router.render = function() {\n//     const route = frappe.get_route_str();\n//     console.log(\"Current route:\", route);\n//     console.log(\"frappe.get_route()\",frappe.get_route());    \n\n//     // $('body').removeClass('my-drive-v2-active');\n\n//      if (route !== \"Workspaces/Document Management\") {\n\n//         console.log(\"rout is not my drive\");\n\n//         $(\"#page-my-drive-v2\").css('margin-display', 'none');\n\n//         if ($(\".page-title button\").length > 1) {\n//             console.log(\"length is \",$(\".page-title button\").length);\n\n//             // $(\".page-title button\").first().remove();\n\n//             // window.location.reload();\n\n//             let sidebar = $(\".layout-side-section\");\n//             console.log(sidebar);\n            \n\n// \t\t\tlet innerSidebar = $(\".list-sidebar\");\n\n//             sidebar.show();\n//             innerSidebar.addClass(\"opened\");\n    \n//             console.log(\"removed one check\");\n\n//             $(\".layout-side-section\").show();\n// \t\t    $(\".list-sidebar\").addClass(\"opened\");\n\n            \n            \n//         }\n        \n      \n//     }\n\t\t\n// \t\t// \uD83C\uDFAF IMPORTANT: Reset sidebar state for other pages\n\t\t\n\n//     if (route === \"Workspaces/Document Management\") {\n//         // window.location.reload();\n//         console.log(\"Redirecting to my-drive-v2\");\n//         frappe.set_route(\"my-drive-v2\");\n//         return;\n//     }\n   \n//     // Call original render for other routes\n//     return original_render.call(this);\n// };\n\n\n\n\n\n"],
  "mappings": ";;AAuCA,SAAO,QAAQ,eAAe;AAG9B,MAAI,gBAAgB;AAEpB,SAAO,OAAO,GAAG,UAAU,MAAM;AAC7B,UAAM,eAAe,OAAO,cAAc;AAE1C,YAAQ,IAAI,iBAAgB,YAAY;AAIxC,QAAI,iBAAiB,kCAAkC;AACnD,aAAO,UAAU,aAAa;AAC9B,sBAAgB;AAChB,cAAQ,IAAI,eAAc,OAAO,cAAc,CAAC;AAChD;AAAA,IAEJ;AAEA,QAAI,iBAAgB,kCAAiC;AAEjD,UAAI,iBAAgB,eAAc;AAC9B,gBAAQ,IAAI,gBAAe,YAAY;AACvC,eAAO,SAAS,OAAO;AACvB;AAAA,MAEJ;AAAA,IACJ;AAGA,oBAAgB;AAAA,EACpB,CAAC;",
  "names": []
}
